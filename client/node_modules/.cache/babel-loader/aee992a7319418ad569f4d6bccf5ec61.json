{"ast":null,"code":"var _jsxFileName = \"/Users/anandsimmy/react-projects/crown-clothing/src/App.js\";\nimport React, { Component } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from 'reselect'; //styles\n\nimport './App.css'; //pages\n\nimport Homepage from './pages/homepage/homepage-component';\nimport Shop from './pages/shop/shop-component';\nimport SignInSignUp from './pages/signin-and-signup/signin-and-signup-component';\nimport CheckOut from './pages/checkout/checkout-component'; //components\n\nimport Header from './components/header/header-component'; //firebase-utils\n\nimport { auth, createUserProfileInDB, addCollectionsAndDocumentsInDB } from './firebase/firebase-utils'; //redux-stuff\n\nimport { setCurrentUser } from './redux/user/user-actions';\nimport { selectCurrentUser } from './redux/user/user-selectors';\nimport { selectShopCollectionsOverView } from './redux/shop/shop-selectors';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.unSubscribeFromAuthListener = null;\n  }\n\n  componentDidMount() {\n    const {\n      setCurrentUser,\n      collectionsArray\n    } = this.props;\n    this.unSubscribeFromAuthListener = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileInDB(userAuth);\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      } else {\n        setCurrentUser(null); //if there's no user, set currentUser to null\n      }\n\n      addCollectionsAndDocumentsInDB('collections', collectionsArray.map(({\n        title,\n        items\n      }) => ({\n        title,\n        items\n      })));\n    });\n  }\n\n  componentWillUnmount() {\n    this.unSubscribeFromAuthListener();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: Homepage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/shop\",\n      component: Shop,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/checkout\",\n      component: CheckOut,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signin\",\n      render: () => this.props.currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 44\n        }\n      }) : /*#__PURE__*/React.createElement(SignInSignUp, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 66\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  collectionsArray: selectShopCollectionsOverView\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/anandsimmy/react-projects/crown-clothing/src/App.js"],"names":["React","Component","Switch","Route","Redirect","connect","createStructuredSelector","Homepage","Shop","SignInSignUp","CheckOut","Header","auth","createUserProfileInDB","addCollectionsAndDocumentsInDB","setCurrentUser","selectCurrentUser","selectShopCollectionsOverView","App","unSubscribeFromAuthListener","componentDidMount","collectionsArray","props","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","map","title","items","componentWillUnmount","render","currentUser","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from 'reselect'\n//styles\nimport './App.css'\n//pages\nimport Homepage from './pages/homepage/homepage-component'\nimport Shop from './pages/shop/shop-component'\nimport SignInSignUp from './pages/signin-and-signup/signin-and-signup-component'\nimport CheckOut from './pages/checkout/checkout-component'\n//components\nimport Header from './components/header/header-component'\n//firebase-utils\nimport { auth, createUserProfileInDB, addCollectionsAndDocumentsInDB } from './firebase/firebase-utils'\n//redux-stuff\nimport { setCurrentUser } from './redux/user/user-actions'\nimport { selectCurrentUser } from './redux/user/user-selectors'\nimport { selectShopCollectionsOverView } from './redux/shop/shop-selectors'\n\nclass App extends Component {\n\n  unSubscribeFromAuthListener= null\n\n  componentDidMount(){\n\n    const { setCurrentUser, collectionsArray }= this.props\n\n    this.unSubscribeFromAuthListener= auth.onAuthStateChanged(async userAuth => {\n\n      if(userAuth){\n        const userRef= await createUserProfileInDB(userAuth)\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n              id: snapShot.id,\n              ...snapShot.data()\n            })\n        })\n      } else{\n        setCurrentUser(null) //if there's no user, set currentUser to null\n      }\n\n      addCollectionsAndDocumentsInDB('collections', collectionsArray.map(({ title, items })=> ({ title, items })))\n\n    })\n  }\n\n  componentWillUnmount(){\n    this.unSubscribeFromAuthListener()\n  }\n\n  render(){\n    return (\n      <div>\n        <Header />\n        <Switch>\n          <Route exact path='/' component={Homepage} />\n          <Route path='/shop' component={Shop} />\n          <Route path='/checkout' component={CheckOut} />\n          <Route path='/signin' render={\n            () => this.props.currentUser ? <Redirect to='/' /> : <SignInSignUp />\n          } />\n        </Switch>\n      </div>\n    );\n  }\n\n}\n\nconst mapStateToProps= createStructuredSelector({\n  currentUser: selectCurrentUser,\n  collectionsArray: selectShopCollectionsOverView\n})\n\nconst mapDispatchToProps= dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n"]},"metadata":{},"sourceType":"module"}